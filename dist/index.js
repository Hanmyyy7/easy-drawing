!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.easy_drawing=e(require("react")):t.easy_drawing=e(t.react)}(this,function(t){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=13)}([function(e,i){e.exports=t},function(t,e,i){"use strict";t.exports=i(4)},function(t,e,i){t.exports=i(9)},function(t,e,i){"use strict";function n(){if(!(this instanceof n))return new n;this.queue=[],this.cache=null}n.prototype.matrix=function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]?this:(this.cache=null,this.queue.push(t),this)},n.prototype.translate=function(t,e){return 0===t&&0===e||(this.cache=null,this.queue.push([1,0,0,1,t,e])),this},n.prototype.scale=function(t,e){return 1===t&&1===e||(this.cache=null,this.queue.push([t,0,0,e,0,0])),this},n.prototype.rotate=function(t,e,i){var n,a,r;return 0!==t&&(this.translate(e,i),n=t*Math.PI/180,a=Math.cos(n),r=Math.sin(n),this.queue.push([a,r,-r,a,0,0]),this.cache=null,this.translate(-e,-i)),this},n.prototype.skewX=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,0,Math.tan(t*Math.PI/180),1,0,0])),this},n.prototype.skewY=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,Math.tan(t*Math.PI/180),0,1,0,0])),this},n.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],1===this.queue.length)return this.cache;for(var t=1;t<this.queue.length;t++)this.cache=(e=this.cache,i=this.queue[t],[e[0]*i[0]+e[2]*i[1],e[1]*i[0]+e[3]*i[1],e[0]*i[2]+e[2]*i[3],e[1]*i[2]+e[3]*i[3],e[0]*i[4]+e[2]*i[5]+e[4],e[1]*i[4]+e[3]*i[5]+e[5]]);var e,i;return this.cache},n.prototype.calc=function(t,e,i){var n;return this.queue.length?(this.cache||(this.cache=this.toArray()),[t*(n=this.cache)[0]+e*n[2]+(i?0:n[4]),t*n[1]+e*n[3]+(i?0:n[5])]):[t,e]},t.exports=n},function(t,e,i){"use strict";var n=i(5),a=i(6),r=i(3),s=i(7),o=i(8);function h(t){if(!(this instanceof h))return new h(t);var e=n(t);this.segments=e.segments,this.err=e.err,this.__stack=[]}h.prototype.__matrix=function(t){var e,i=this;t.queue.length&&this.iterate(function(n,a,r,s){var h,c,l,u;switch(n[0]){case"v":c=0===(h=t.calc(0,n[1],!0))[0]?["v",h[1]]:["l",h[0],h[1]];break;case"V":c=(h=t.calc(r,n[1],!1))[0]===t.calc(r,s,!1)[0]?["V",h[1]]:["L",h[0],h[1]];break;case"h":c=0===(h=t.calc(n[1],0,!0))[1]?["h",h[0]]:["l",h[0],h[1]];break;case"H":c=(h=t.calc(n[1],s,!1))[1]===t.calc(r,s,!1)[1]?["H",h[0]]:["L",h[0],h[1]];break;case"a":case"A":var f=t.toArray(),p=o(n[1],n[2],n[3]).transform(f);if(f[0]*f[3]-f[1]*f[2]<0&&(n[5]=n[5]?"0":"1"),h=t.calc(n[6],n[7],"a"===n[0]),"A"===n[0]&&n[6]===r&&n[7]===s||"a"===n[0]&&0===n[6]&&0===n[7]){c=["a"===n[0]?"l":"L",h[0],h[1]];break}c=p.isDegenerate()?["a"===n[0]?"l":"L",h[0],h[1]]:[n[0],p.rx,p.ry,p.ax,n[4],n[5],h[0],h[1]];break;case"m":u=a>0,c=["m",(h=t.calc(n[1],n[2],u))[0],h[1]];break;default:for(c=[l=n[0]],u=l.toLowerCase()===l,e=1;e<n.length;e+=2)h=t.calc(n[e],n[e+1],u),c.push(h[0],h[1])}i.segments[a]=c},!0)},h.prototype.__evaluateStack=function(){var t,e;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(t=r(),e=this.__stack.length;--e>=0;)t.matrix(this.__stack[e].toArray());this.__matrix(t),this.__stack=[]}},h.prototype.toString=function(){var t,e,i=[];this.__evaluateStack();for(var n=0;n<this.segments.length;n++)e=this.segments[n][0],t=n>0&&"m"!==e&&"M"!==e&&e===this.segments[n-1][0],i=i.concat(t?this.segments[n].slice(1):this.segments[n]);return i.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")},h.prototype.translate=function(t,e){return this.__stack.push(r().translate(t,e||0)),this},h.prototype.scale=function(t,e){return this.__stack.push(r().scale(t,e||0===e?e:t)),this},h.prototype.rotate=function(t,e,i){return this.__stack.push(r().rotate(t,e||0,i||0)),this},h.prototype.skewX=function(t){return this.__stack.push(r().skewX(t)),this},h.prototype.skewY=function(t){return this.__stack.push(r().skewY(t)),this},h.prototype.matrix=function(t){return this.__stack.push(r().matrix(t)),this},h.prototype.transform=function(t){return t.trim()?(this.__stack.push(a(t)),this):this},h.prototype.round=function(t){var e,i=0,n=0,a=0,r=0;return t=t||0,this.__evaluateStack(),this.segments.forEach(function(s){var o=s[0].toLowerCase()===s[0];switch(s[0]){case"H":case"h":return o&&(s[1]+=a),a=s[1]-s[1].toFixed(t),void(s[1]=+s[1].toFixed(t));case"V":case"v":return o&&(s[1]+=r),r=s[1]-s[1].toFixed(t),void(s[1]=+s[1].toFixed(t));case"Z":case"z":return a=i,void(r=n);case"M":case"m":return o&&(s[1]+=a,s[2]+=r),a=s[1]-s[1].toFixed(t),r=s[2]-s[2].toFixed(t),i=a,n=r,s[1]=+s[1].toFixed(t),void(s[2]=+s[2].toFixed(t));case"A":case"a":return o&&(s[6]+=a,s[7]+=r),a=s[6]-s[6].toFixed(t),r=s[7]-s[7].toFixed(t),s[1]=+s[1].toFixed(t),s[2]=+s[2].toFixed(t),s[3]=+s[3].toFixed(t+2),s[6]=+s[6].toFixed(t),void(s[7]=+s[7].toFixed(t));default:return e=s.length,o&&(s[e-2]+=a,s[e-1]+=r),a=s[e-2]-s[e-2].toFixed(t),r=s[e-1]-s[e-1].toFixed(t),void s.forEach(function(e,i){i&&(s[i]=+s[i].toFixed(t))})}}),this},h.prototype.iterate=function(t,e){var i,n,a,r=this.segments,s={},o=!1,h=0,c=0,l=0,u=0;if(e||this.__evaluateStack(),r.forEach(function(e,i){var n=t(e,i,h,c);Array.isArray(n)&&(s[i]=n,o=!0);var a=e[0]===e[0].toLowerCase();switch(e[0]){case"m":case"M":return h=e[1]+(a?h:0),c=e[2]+(a?c:0),l=h,void(u=c);case"h":case"H":return void(h=e[1]+(a?h:0));case"v":case"V":return void(c=e[1]+(a?c:0));case"z":case"Z":return h=l,void(c=u);default:h=e[e.length-2]+(a?h:0),c=e[e.length-1]+(a?c:0)}}),!o)return this;for(a=[],i=0;i<r.length;i++)if(void 0!==s[i])for(n=0;n<s[i].length;n++)a.push(s[i][n]);else a.push(r[i]);return this.segments=a,this},h.prototype.abs=function(){return this.iterate(function(t,e,i,n){var a,r=t[0],s=r.toUpperCase();if(r!==s)switch(t[0]=s,r){case"v":return void(t[1]+=n);case"a":return t[6]+=i,void(t[7]+=n);default:for(a=1;a<t.length;a++)t[a]+=a%2?i:n}},!0),this},h.prototype.rel=function(){return this.iterate(function(t,e,i,n){var a,r=t[0],s=r.toLowerCase();if(r!==s&&(0!==e||"M"!==r))switch(t[0]=s,r){case"V":return void(t[1]-=n);case"A":return t[6]-=i,void(t[7]-=n);default:for(a=1;a<t.length;a++)t[a]-=a%2?i:n}},!0),this},h.prototype.unarc=function(){return this.iterate(function(t,e,i,n){var a,r,o,h=[],c=t[0];return"A"!==c&&"a"!==c?null:("a"===c?(r=i+t[6],o=n+t[7]):(r=t[6],o=t[7]),0===(a=s(i,n,r,o,t[4],t[5],t[1],t[2],t[3])).length?[["a"===t[0]?"l":"L",t[6],t[7]]]:(a.forEach(function(t){h.push(["C",t[2],t[3],t[4],t[5],t[6],t[7]])}),h))}),this},h.prototype.unshort=function(){var t,e,i,n,a,r=this.segments;return this.iterate(function(s,o,h,c){var l,u=s[0],f=u.toUpperCase();o&&("T"===f?(l="t"===u,"Q"===(i=r[o-1])[0]?(t=i[1]-h,e=i[2]-c):"q"===i[0]?(t=i[1]-i[3],e=i[2]-i[4]):(t=0,e=0),n=-t,a=-e,l||(n+=h,a+=c),r[o]=[l?"q":"Q",n,a,s[1],s[2]]):"S"===f&&(l="s"===u,"C"===(i=r[o-1])[0]?(t=i[3]-h,e=i[4]-c):"c"===i[0]?(t=i[3]-i[5],e=i[4]-i[6]):(t=0,e=0),n=-t,a=-e,l||(n+=h,a+=c),r[o]=[l?"c":"C",n,a,s[1],s[2],s[3],s[4]]))}),this},t.exports=h},function(t,e,i){"use strict";var n={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},a=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function r(t){return t>=48&&t<=57}function s(t){this.index=0,this.path=t,this.max=t.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function o(t){for(;t.index<t.max&&(10===(e=t.path.charCodeAt(t.index))||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||e>=5760&&a.indexOf(e)>=0);)t.index++;var e}function h(t){var e,i=t.index,n=i,a=t.max,s=!1,o=!1,h=!1,c=!1;if(n>=a)t.err="SvgPath: missed param (at pos "+n+")";else if(43!==(e=t.path.charCodeAt(n))&&45!==e||(e=++n<a?t.path.charCodeAt(n):0),r(e)||46===e){if(46!==e){if(s=48===e,e=++n<a?t.path.charCodeAt(n):0,s&&n<a&&e&&r(e))return void(t.err="SvgPath: numbers started with `0` such as `09` are ilegal (at pos "+i+")");for(;n<a&&r(t.path.charCodeAt(n));)n++,o=!0;e=n<a?t.path.charCodeAt(n):0}if(46===e){for(c=!0,n++;r(t.path.charCodeAt(n));)n++,h=!0;e=n<a?t.path.charCodeAt(n):0}if(101===e||69===e){if(c&&!o&&!h)return void(t.err="SvgPath: invalid float exponent (at pos "+n+")");if(43!==(e=++n<a?t.path.charCodeAt(n):0)&&45!==e||n++,!(n<a&&r(t.path.charCodeAt(n))))return void(t.err="SvgPath: invalid float exponent (at pos "+n+")");for(;n<a&&r(t.path.charCodeAt(n));)n++}t.index=n,t.param=parseFloat(t.path.slice(i,n))+0}else t.err="SvgPath: param should start with 0..9 or `.` (at pos "+n+")"}function c(t){var e,i;i=(e=t.path[t.segmentStart]).toLowerCase();var a=t.data;if("m"===i&&a.length>2&&(t.result.push([e,a[0],a[1]]),a=a.slice(2),i="l",e="m"===e?"l":"L"),"r"===i)t.result.push([e].concat(a));else for(;a.length>=n[i]&&(t.result.push([e].concat(a.splice(0,n[i]))),n[i]););}function l(t){var e,i,a,r=t.max;if(t.segmentStart=t.index,function(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}(t.path.charCodeAt(t.index)))if(i=n[t.path[t.index].toLowerCase()],t.index++,o(t),t.data=[],i){for(e=!1;;){for(a=i;a>0;a--){if(h(t),t.err.length)return;t.data.push(t.param),o(t),e=!1,t.index<r&&44===t.path.charCodeAt(t.index)&&(t.index++,o(t),e=!0)}if(!e){if(t.index>=t.max)break;if(!((s=t.path.charCodeAt(t.index))>=48&&s<=57||43===s||45===s||46===s))break}}var s;c(t)}else c(t);else t.err="SvgPath: bad command "+t.path[t.index]+" (at pos "+t.index+")"}t.exports=function(t){var e=new s(t),i=e.max;for(o(e);e.index<i&&!e.err.length;)l(e);return e.err.length?e.result=[]:e.result.length&&("mM".indexOf(e.result[0][0])<0?(e.err="SvgPath: string should start with `M` or `m`",e.result=[]):e.result[0][0]="M"),{err:e.err,segments:e.result}}},function(t,e,i){"use strict";var n=i(3),a={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},r=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,s=/[\s,]+/;t.exports=function(t){var e,i,o=new n;return t.split(r).forEach(function(t){if(t.length)if(void 0===a[t])switch(i=t.split(s).map(function(t){return+t||0}),e){case"matrix":return void(6===i.length&&o.matrix(i));case"scale":return void(1===i.length?o.scale(i[0],i[0]):2===i.length&&o.scale(i[0],i[1]));case"rotate":return void(1===i.length?o.rotate(i[0],0,0):3===i.length&&o.rotate(i[0],i[1],i[2]));case"translate":return void(1===i.length?o.translate(i[0],0):2===i.length&&o.translate(i[0],i[1]));case"skewX":return void(1===i.length&&o.skewX(i[0]));case"skewY":return void(1===i.length&&o.skewY(i[0]))}else e=t}),o}},function(t,e,i){"use strict";var n=2*Math.PI;function a(t,e,i,n){var a=t*i+e*n;return a>1&&(a=1),a<-1&&(a=-1),(t*n-e*i<0?-1:1)*Math.acos(a)}function r(t,e){var i=4/3*Math.tan(e/4),n=Math.cos(t),a=Math.sin(t),r=Math.cos(t+e),s=Math.sin(t+e);return[n,a,n-a*i,a+n*i,r+s*i,s-r*i,r,s]}t.exports=function(t,e,i,s,o,h,c,l,u){var f=Math.sin(u*n/360),p=Math.cos(u*n/360),v=p*(t-i)/2+f*(e-s)/2,y=-f*(t-i)/2+p*(e-s)/2;if(0===v&&0===y)return[];if(0===c||0===l)return[];c=Math.abs(c),l=Math.abs(l);var d=v*v/(c*c)+y*y/(l*l);d>1&&(c*=Math.sqrt(d),l*=Math.sqrt(d));var m=function(t,e,i,r,s,o,h,c,l,u){var f=u*(t-i)/2+l*(e-r)/2,p=-l*(t-i)/2+u*(e-r)/2,v=h*h,y=c*c,d=f*f,m=p*p,x=v*y-v*m-y*d;x<0&&(x=0),x/=v*m+y*d;var g=(x=Math.sqrt(x)*(s===o?-1:1))*h/c*p,b=x*-c/h*f,w=u*g-l*b+(t+i)/2,P=l*g+u*b+(e+r)/2,k=(f-g)/h,M=(p-b)/c,A=(-f-g)/h,S=(-p-b)/c,L=a(1,0,k,M),C=a(k,M,A,S);return 0===o&&C>0&&(C-=n),1===o&&C<0&&(C+=n),[w,P,L,C]}(t,e,i,s,o,h,c,l,f,p),x=[],g=m[2],b=m[3],w=Math.max(Math.ceil(Math.abs(b)/(n/4)),1);b/=w;for(var P=0;P<w;P++)x.push(r(g,b)),g+=b;return x.map(function(t){for(var e=0;e<t.length;e+=2){var i=t[e+0],n=t[e+1],a=p*(i*=c)-f*(n*=l),r=f*i+p*n;t[e+0]=a+m[0],t[e+1]=r+m[1]}return t})}},function(t,e,i){"use strict";var n=Math.PI/180;function a(t,e,i){if(!(this instanceof a))return new a(t,e,i);this.rx=t,this.ry=e,this.ax=i}a.prototype.transform=function(t){var e=Math.cos(this.ax*n),i=Math.sin(this.ax*n),a=[this.rx*(t[0]*e+t[2]*i),this.rx*(t[1]*e+t[3]*i),this.ry*(-t[0]*i+t[2]*e),this.ry*(-t[1]*i+t[3]*e)],r=a[0]*a[0]+a[2]*a[2],s=a[1]*a[1]+a[3]*a[3],o=((a[0]-a[3])*(a[0]-a[3])+(a[2]+a[1])*(a[2]+a[1]))*((a[0]+a[3])*(a[0]+a[3])+(a[2]-a[1])*(a[2]-a[1])),h=(r+s)/2;if(o<1e-10*h)return this.rx=this.ry=Math.sqrt(h),this.ax=0,this;var c=a[0]*a[1]+a[2]*a[3],l=h+(o=Math.sqrt(o))/2,u=h-o/2;return this.ax=Math.abs(c)<1e-10&&Math.abs(l-s)<1e-10?90:180*Math.atan(Math.abs(c)>Math.abs(l-s)?(l-r)/c:c/(l-s))/Math.PI,this.ax>=0?(this.rx=Math.sqrt(l),this.ry=Math.sqrt(u)):(this.ax+=90,this.rx=Math.sqrt(u),this.ry=Math.sqrt(l)),this},a.prototype.isDegenerate=function(){return this.rx<1e-10*this.ry||this.ry<1e-10*this.rx},t.exports=a},function(t,e,i){var n=i(10);function a(t){return new n(t).getBoundingBox()}t.exports=a,a.Path=n},function(t,e,i){var n=i(11),a=i(12),r=i(1);function s(t){this.d=t}t.exports=s,s.prototype={getBoundingBox:function(){var t,e;return t=new r(this.d),e=new n,t.abs().unarc().unshort().iterate(function(t,i,n,a){switch(t[0]){case"M":case"L":e.addPoint(t[1],t[2]);break;case"H":e.addX(t[1]);break;case"V":e.addY(t[1]);break;case"Q":e.addQuadraticCurve(n,a,t[1],t[2],t[3],t[4]);break;case"C":e.addBezierCurve(n,a,t[1],t[2],t[3],t[4],t[5],t[6])}}),new a(e)}}},function(t,e){function i(t,e,i,n){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.addPoint(t,e),this.addPoint(i,n)}t.exports=i,i.prototype={width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1},addPoint:function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},addX:function(t){this.addPoint(t,null)},addY:function(t){this.addPoint(null,t)},addQuadraticCurve:function(t,e,i,n,a,r){var s=t+2/3*(i-t),o=e+2/3*(n-e),h=s+1/3*(a-t),c=o+1/3*(r-e);this.addBezierCurve(t,e,s,h,o,c,a,r)},addBezierCurve:function(t,e,i,n,a,r,s,o){var h,c=[t,e],l=[i,n],u=[a,r],f=[s,o];for(this.addPoint(c[0],c[1]),this.addPoint(f[0],f[1]),h=0;h<=1;h++){var p=function(t){return Math.pow(1-t,3)*c[h]+3*Math.pow(1-t,2)*t*l[h]+3*(1-t)*Math.pow(t,2)*u[h]+Math.pow(t,3)*f[h]},v=6*c[h]-12*l[h]+6*u[h],y=-3*c[h]+9*l[h]-9*u[h]+3*f[h],d=3*l[h]-3*c[h];if(0!=y){var m=Math.pow(v,2)-4*d*y;if(!(m<0)){var x=(-v+Math.sqrt(m))/(2*y);0<x&&x<1&&(0==h&&this.addX(p(x)),1==h&&this.addY(p(x)));var g=(-v-Math.sqrt(m))/(2*y);0<g&&g<1&&(0==h&&this.addX(p(g)),1==h&&this.addY(p(g)))}}else{if(0==v)continue;var b=-d/v;0<b&&b<1&&(0==h&&this.addX(p(b)),1==h&&this.addY(p(b)))}}}}},function(t,e){function i(t){this.x1=this.minX=t.x1||0,this.y1=this.minY=t.y1||0,this.x2=this.maxX=t.x2||0,this.y2=this.maxY=t.y2||0,this.width=t.width()||0,this.height=t.height()||0}t.exports=i,i.prototype={round:function(t){return t=t||0,this.x1=this.minX=+this.x1.toFixed(t),this.y1=this.minY=+this.y1.toFixed(t),this.x2=this.maxX=+this.x2.toFixed(t),this.y2=this.maxY=+this.y2.toFixed(t),this.width=+this.width.toFixed(t),this.height=+this.height.toFixed(t),this},scale:function(t){var e=this;return t=t||1,["x1","minX","y1","minY","x2","maxX","y2","maxY","width","height"].forEach(function(i){e[i]=e[i]*t}),this},toString:function(){return[this.minX,this.minY,this.width,this.height].join(" ")}}},function(t,e,i){"use strict";i.r(e);var n=i(0),a=i.n(n),r=function(t){var e=[],i=null,n=function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];e=a,i||(i=requestAnimationFrame(function(){i=null,t.apply(void 0,e)}))};return n.cancel=function(){i&&(cancelAnimationFrame(i),i=null)},n};function s(t){var e=t,i=[],n=20037508.34*e[0]/180;Math.abs(e[1])>85.05112877980659&&(e[1]=85.05112877980659*Math.abs(e[1])/e[1]);var a=Math.log(Math.tan((90+e[1])*Math.PI/360))/(Math.PI/180);return a=20037508.34*a/180,i[0]=n,i[1]=a,i}var o=window.devicePixelRatio,h=2===o?1:2;function c(t,e){t?e():setTimeout(function(){c(t,e)},0)}var l={animQueue:{},_a:!1};function u(){Object.values(l.animQueue).forEach(function(t){t()}),l._a&&window.requestAnimationFrame(u)}function f(t){var e="animation_".concat((Math.random()*Math.random()).toString().replace(/\./g,""));return l.animQueue[e]=t,l._a||(window.requestAnimationFrame(u),l._a=!0),{stop:function(){delete l.animQueue[e],0===Object.keys(l.animQueue).length&&(l._a=!1)}}}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function y(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?v(i,!0).forEach(function(e){b(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):v(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function d(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var w=function(t){function e(){var t,i,n,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return n=this,i=!(a=(t=m(e)).call.apply(t,[this].concat(s)))||"object"!==p(a)&&"function"!=typeof a?x(n):a,b(x(i),"canvas",null),i}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(e,a.a.Component),i=e,(n=[{key:"componentDidMount",value:function(){c(this.canvas,this.initCanvas.bind(this))}},{key:"initCanvas",value:function(){var t=window.getComputedStyle(this.canvas.parentNode),e=window.parseFloat(t.getPropertyValue("width")),i=window.parseFloat(t.getPropertyValue("height"));this.canvas.style.width="".concat(e,"px"),this.canvas.style.height="".concat(i,"px"),this.canvas.width=e*o,this.canvas.height=i*o}},{key:"render",value:function(){var t=this,e=this.props.style||{};return a.a.createElement("canvas",{ref:function(e){return t.canvas=e},style:y({},e)})}}])&&d(i.prototype,n),r&&d(i,r),e}();function P(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var k=function(){function t(e,i,n,a,r,s,o,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.points=e,this.context=i,this.fillStyle=n||"rgba(111,149,255,0.4)",this.strokeStyle=a||"rgba(111,149,255,0.4",this.name=r,this.shadowColor=s,this.click=o,this.over=h,this.reover=0}var e,i,n;return e=t,(i=[{key:"createMapPath",value:function(){var t=this;Array.isArray(this.points)&&(this.context.beginPath(),this.points.forEach(function(e,i){0===i?t.context.moveTo(e[0],e[1]):t.context.lineTo(e[0],e[1])}),this.context.closePath())}},{key:"drawMap",value:function(t,e){this.context.save(),this.createMapPath(),this.context.fillStyle=t||this.fillStyle,this.context.strokeStyle=e||this.strokeStyle,this.shadowColor&&(this.context.shadowColor=this.shadowColor,this.context.shadowBlur=10),this.context.fill(),this.context.stroke(),this.drawName(),this.context.restore()}},{key:"drawName",value:function(){if(Array.isArray(this.points)&&this.name&&this.name.text&&!1!==this.name.show){for(var t=null,e=null,i=null,n=null,a=(this.points.map(function(a){var r=a[0],s=a[1];return i=null===i?r:Math.max(i,r),t=null===t?r:Math.min(t,r),n=null===n?s:Math.max(n,s),e=null===e?s:Math.min(e,s),{x:r,y:s}}),{x:(i+t)/2,y:(n+e)/2}),r=this.name.fontSize||"12px",s=parseFloat(r),h=0,c=0;c<r.length;c+=1)if(0!==c&&"."!==r[c]&&!/^\d+$/.test(r[c])){h=c;break}this.context.font="".concat(s*Math.sqrt(Math.pow(o,2))).concat(r.slice(h)," Arial"),this.context.textAlign="center",this.context.textBaseline="middle",this.context.fillStyle=this.name.color||"#fff",this.context.fillText(this.name.text,a.x,a.y)}}},{key:"clearMap",value:function(){this.createMapPath(),this.context.save(),this.context.clip(),this.context.clearRect(-this.context.canvas.width/2,-this.context.canvas.height/2,this.context.canvas.width,this.context.canvas.height),this.context.restore()}}])&&P(e.prototype,i),n&&P(e,n),t}();function M(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function A(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var S=1.7,L=(S-1)/2+1,C=function(){function t(e,i,n,a,r,s,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),A(this,"animate",function(t){this.tempRadius1>this.radius*S?this.tempRadius1=this.radius:this.tempRadius1+=this.step,this.tempRadius2>this.radius*S?this.tempRadius2=this.radius:this.tempRadius2+=this.step,this.tempRadius3>this.radius*S?this.tempRadius3=this.radius:this.tempRadius3+=this.step,this.drawAnimate(t)}),A(this,"start",function(t){this.timer=f(this.animate.bind(this,t))}),A(this,"stop",function(){this.timer&&this.timer.stop()}),this.x=i,this.y=n,this.radius=a,this.step=a/150,this.color=r||"yellow",this.context=e,this.tempRadius1=this.radius,this.tempRadius2=this.radius*L,this.tempRadius3=this.radius*S,this.animationID=null,this.click=s,this.over=o,this.reover=0,this.GENAME="scatter"}var e,i,n;return e=t,(i=[{key:"normalized",value:function(t,e,i,n,a){return(a-n)*(t-e)/(i-e)+n}},{key:"createPath",value:function(){this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI)}},{key:"strokePath",value:function(t){this.context.save(),this.context.strokeStyle=t||this.color,this.context.stroke(),this.context.restore()}},{key:"fillPath",value:function(t){this.context.save(),this.context.fillStyle=t||this.color,this.context.fill(),this.context.restore()}},{key:"strokeFlashCirclePath",value:function(t,e){this.context.save(),this.context.beginPath();var i=1-this.normalized(t,this.radius,this.radius*S,0,1);this.context.globalAlpha=i<0?.05:i,this.context.arc(this.x,this.y,t,0,2*Math.PI),this.strokePath(e),this.context.restore()}},{key:"drawAnimate",value:function(t){this.context.save(),this.context.save(),this.context.beginPath(),this.context.arc(this.x,this.y,2*this.radius,0,2*Math.PI),this.context.clip(),this.context.clearRect(-this.context.canvas.width/2,-this.context.canvas.height/2,this.context.canvas.width,this.context.canvas.height),this.context.restore(),this.createPath(),this.fillPath(t),this.strokeFlashCirclePath(this.tempRadius1,t),this.strokeFlashCirclePath(this.tempRadius2,t),this.strokeFlashCirclePath(this.tempRadius3,t),this.context.restore()}}])&&M(e.prototype,i),n&&M(e,n),t}(),O=i(1),_=i.n(O),E=i(2),j=i.n(E);function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function T(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var N=function(){function t(e){var i=e.path,n=e.context,a=e.center,r=e.point,s=e.ratio,o=e.color,h=e.mouseClick,c=e.mouseOver;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.svg=window.document.createElementNS("http://www.w3.org/2000/svg","path"),this.context=n,this.center=a,this.point=F(r),this.spoint=F(r),this.ratio=s,this.path="",this.rotate=0,this.scale=1,this.color=o||"yellow",this.draw="fill",this.realPath="",this.reover=0,"string"==typeof i&&(this.path=i),"object"===I(i)&&(i.hasOwnProperty("rotate")&&(this.rotate=i.rotate),i.hasOwnProperty("d")&&(this.path=i.d),i.hasOwnProperty("scale")&&(this.scale=i.scale),i.hasOwnProperty("color")&&(this.color=i.color),i.hasOwnProperty("draw")&&(this.draw=i.draw)),this.click=h,this.over=c,this.GENAME="symbol"}var e,i,n;return e=t,(i=[{key:"initPath",value:function(){if("string"!=typeof this.path||0===this.path.length)throw new Error("d must not be empty");var t=_()(this.path);this.realPath=t.rotate(this.rotate).scale(this.scale).rel().toString()}},{key:"convertPoint",value:function(t){var e=s(t||this.point);this.spoint=[(e[0]-this.center[0])*this.ratio,(this.center[1]-e[1])*this.ratio]}},{key:"reWritePath",value:function(){for(var t=0,e=0;e<this.realPath.length;e+=1){if("m"!==this.realPath[0].toLowerCase())throw new Error("path should begin with M");if(0!==e&&/^[A-Za-z]*$/.test(this.realPath[e])){t=e;break}}for(var i=this.realPath.slice(1,t),n=0;n<i.length;n+=1)if(0!==n&&"."!==i[n]&&!/^\d+$/.test(i[n])){t=n;break}var a=window.parseFloat(i.slice(0,t)),r=window.parseFloat(i.slice(t));try{var s=j()(this.realPath),o=(s.minX+s.maxX)/2-a,h=(s.maxY+s.minY)/2-r,c=this.spoint[0]-o,l=this.spoint[1]-h;this.realPath=this.realPath.replace(i,"".concat(c," ").concat(l))}catch(t){var u=this.spoint[0],f=this.spoint[1];this.realPath=this.realPath.replace(i,"".concat(u," ").concat(f))}}},{key:"createPath",value:function(t){this.svg.setAttributeNS(null,"d",t||this.realPath);var e=this.svg.getTotalLength(),i=e/100;this.context.beginPath();for(var n=0;n<=e;n+=i){var a=parseFloat(this.svg.getPointAtLength(n).x),r=parseFloat(this.svg.getPointAtLength(n).y);0===n&&this.context.moveTo(a,r),0!==n&&this.context.lineTo(a,r)}this.context.closePath()}},{key:"fillPath",value:function(t){this.context.fillStyle=t||this.color,this.context.fill()}},{key:"strokePath",value:function(t){this.context.strokeStyle=t||this.color,this.context.stroke()}},{key:"cleanPath",value:function(){this.context.clip(),this.context.clearRect(-this.context.canvas.width/2,-this.context.canvas.height/2,this.context.canvas.width,this.context.canvas.height)}},{key:"prepareAction",value:function(t){this.initPath(),Array.isArray(this.center)?(t&&this.convertPoint(t),!t&&this.convertPoint()):this.spoint=t||this.spoint,this.reWritePath(),this.createPath()}},{key:"fill",value:function(t){var e=t.color,i=t.point;this.prepareAction(i),this.fillPath(e)}},{key:"stroke",value:function(t){var e=t.color,i=t.point;this.prepareAction(i),this.strokePath(e)}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,i=t.point;"function"==typeof this[this.draw]&&this[this.draw]({color:e,point:i})}},{key:"clean",value:function(){this.context.save();var t=j()(this.realPath),e=t.minX-7*this.context.lineWidth,i=t.minY-7*this.context.lineWidth;this.context.beginPath(),this.context.rect(e,i,t.height+14*this.context.lineWidth,t.width+14*this.context.lineWidth),this.cleanPath(),this.context.restore()}}])&&T(e.prototype,i),n&&T(e,n),t}();function q(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var X=function(){function t(e,i,n,a,r,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var o=a.src,h=void 0===o?"":o,c=a.width,l=void 0===c?50:c,u=a.height,f=void 0===u?50:u,p=a.offsetX,v=void 0===p?.5:p,y=a.offsetY,d=void 0===y?.5:y;this.x=i,this.y=n,this.context=e,this.src=h,"string"==typeof l&&-1!==l.indexOf("%")&&(l=parseFloat(l)/100*e.canvas.width),this.width=l,"string"==typeof f&&-1!==f.indexOf("%")&&(f=parseFloat(f)/100*e.canvas.height),this.height=f,this.offsetX=v,this.offsetY=d,this.click=r,this.over=s,this.reover=0,this.GENAME="img"}var e,i,n;return e=t,(i=[{key:"createPath",value:function(){this.context.beginPath(),this.context.rect(this.x-this.offsetX*this.width,this.y-this.height*this.offsetY,this.width,this.height)}},{key:"render",value:function(){var t=this,e=new Image(this.width,this.height);e.src=this.src,e.onload=function(){t.context.drawImage(e,t.x-t.offsetX*t.width,t.y-t.height*t.offsetY,t.width,t.height)}}}])&&q(e.prototype,i),n&&q(e,n),t}();function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function z(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var D=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.points=R(e.points),this.symbol=e.symbol,this.color=e.color||"yellow",this.width=e.width||2,this.animation=e.animation||"alternate",this.speed=Math.abs(e.speed),this.delay=e.delay||0,this.context=e.context,this.scontext=e.scontext,this.svg=window.document.createElementNS("http://www.w3.org/2000/svg","path"),this.path="",this.pathLength=0,this.spanLength=0,this.symPathLength=0,this.symSpanLength=0,this.step=0,this.symStep=0,this.animationID,this.clip,this.symbolInstance}var e,i,n;return e=t,(i=[{key:"getSpeed",value:function(t){return 1e3/Math.sqrt(t,2)+1}},{key:"initSvgPath",value:function(){var t=this;this.points.forEach(function(e,i){0===i&&(t.path="M".concat(e.join(" "))),0!==i&&(t.path="".concat(t.path,"L").concat(e.join(" ")))})}},{key:"initAnimate",value:function(){this.svg.setAttributeNS(null,"d",this.path),this.pathLength=this.svg.getTotalLength(),isNaN(this.speed)||!this.speed?this.spanLength=this.pathLength/100:this.spanLength=this.pathLength/this.getSpeed(this.speed)}},{key:"initSymbolAnimate",value:function(t){var e=Math.abs(t);this.svg.setAttributeNS(null,"d",this.path),this.symPathLength=this.svg.getTotalLength(),isNaN(e)||!this.speed?this.symSpanLength=this.symPathLength/100:this.symSpanLength=this.symPathLength/this.getSpeed(e)}},{key:"initStaticPath",value:function(){var t=this;this.context.beginPath(),this.points.forEach(function(e,i){var n,a;0===i&&(n=t.context).moveTo.apply(n,R(e)),0!==i&&(a=t.context).lineTo.apply(a,R(e))})}},{key:"stroke",value:function(){this.context.save(),this.context.strokeStyle=this.color,this.context.lineCap="round",this.context.lineJoin="round",this.context.lineWidth=this.width,this.context.stroke(),this.context.restore()}},{key:"alternate",value:function(){var t=this;this.initSvgPath(),new Promise(function(e){t.timeoutID=setTimeout(e,t.delay)}).then(function(){t.initAnimate(),t.animationID=f(t.alternateA.bind(t))}),this.runSymbol()}},{key:"alternateA",value:function(){this.step>=this.pathLength&&(this.step=0,this.clip=!this.clip),this.step+=this.spanLength;var t=this.step,e=parseFloat(this.svg.getPointAtLength(t).x),i=parseFloat(this.svg.getPointAtLength(t).y);t-=this.spanLength;var n=parseFloat(this.svg.getPointAtLength(t).x),a=parseFloat(this.svg.getPointAtLength(t).y);this.clip?(this.context.beginPath(),this.context.save(),this.context.arc(e,i,this.spanLength,0,2*Math.PI),this.context.clip(),this.context.clearRect(-this.context.canvas.width/2,-this.context.canvas.height/2,this.context.canvas.width,this.context.canvas.height),this.context.restore()):(this.context.beginPath(),this.context.moveTo(n,a),this.context.lineTo(e,i),this.context.save(),this.context.strokeStyle=this.color,this.context.lineWidth=this.width,this.context.stroke(),this.context.restore())}},{key:"symbolA",value:function(){this.symStep>=this.symPathLength&&(this.symStep=0),this.symStep+=this.symSpanLength;var t=this.symStep,e=parseFloat(this.svg.getPointAtLength(t).x),i=parseFloat(this.svg.getPointAtLength(t).y);this.symbolInstance&&(this.symbolInstance.clean(),this.symbolInstance.render({point:[e,i]}))}},{key:"normal",value:function(){this.initStaticPath(),this.stroke(),this.initSvgPath(),this.runSymbol()}},{key:"runSymbol",value:function(){var t=this;this.symbol&&"object"===Y(this.symbol)&&"string"==typeof this.symbol.d&&("number"==typeof this.symbol.delay?new Promise(function(e){t.stimeoutID=setTimeout(e,t.symbol.delay)}).then(function(){t.symbolStart()}):this.symbolStart())}},{key:"symbolStart",value:function(){this.symbolInstance=new N({path:this.symbol,context:this.scontext,point:this.points[0],color:this.color}),this.symbolInstance.render(),this.initSymbolAnimate(this.symbol.speed),this.symbolAID=f(this.symbolA.bind(this))}},{key:"stop",value:function(){this.animationID&&this.animationID.stop(),this.symbolAID&&this.symbolAID.stop(),this.timeoutID&&window.clearTimeout(this.timeoutID),this.stimeoutID&&window.clearTimeout(this.stimeoutID)}}])&&z(e.prototype,i),n&&z(e,n),t}();function B(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var G=function(){function t(e,i,n,a,r,s,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=i,this.y=n,this.radius=a,this.color=r||"yellow",this.context=e,this.click=s,this.over=o,this.reover=0,this.GENAME="circle"}var e,i,n;return e=t,(i=[{key:"createPath",value:function(){this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI)}},{key:"createLPath",value:function(){this.context.beginPath(),this.context.arc(this.x,this.y,1.5*this.radius,0,2*Math.PI)}},{key:"createCleanPath",value:function(){this.context.beginPath(),this.context.arc(this.x,this.y,2*this.radius,0,2*Math.PI)}},{key:"fillSPath",value:function(t){this.context.save(),this.context.fillStyle=t||this.color,this.context.fill(),this.context.restore()}},{key:"fillLPath",value:function(t){this.context.save(),this.context.globalAlpha=.4,this.context.fillStyle=t||this.color,this.context.fill(),this.context.restore()}},{key:"fill",value:function(t){this.createLPath(),this.fillLPath(t),this.createPath(),this.fillSPath(t)}},{key:"clear",value:function(){this.createCleanPath(),this.context.save(),this.context.clip(),this.context.clearRect(-this.context.canvas.width/2,-this.context.canvas.height/2,this.context.canvas.width,this.context.canvas.height),this.context.restore()}}])&&B(e.prototype,i),n&&B(e,n),t}();function Q(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var W=function(){function t(e,i,n,a,r,s,o,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text=e||"",this.size=s||"12px",this.x=n,this.y=a,this.color=r||"#fff",this.context=i,this.align=o||"center",this.vertical=h||"middle",this.reover=0,this.GENAME="text"}var e,i,n;return e=t,(i=[{key:"fillText",value:function(){this.context.save();for(var t=this.size,e=parseFloat(t),i=0,n=0;n<t.length;n+=1)if(0!==n&&"."!==t[n]&&!/^\d+$/.test(t[n])){i=n;break}this.context.font="".concat(e*Math.sqrt(Math.pow(o,2))).concat(t.slice(i)," Arial"),this.context.fillStyle=this.color,this.context.textAlign=this.align,this.context.textBaseline=this.vertical,this.context.fillText(this.text,this.x,this.y),this.context.restore()}},{key:"clearText",value:function(){this.context.save();var t=this.text.length,e=this.context.measureText(this.text).width,i=Math.ceil(e/t);this.context.rect(this.x-Math.ceil(e/2),this.y-i,1.5*e,1.5*i),this.context.clip(),this.context.clearRect(-this.context.canvas.width/2,-this.context.canvas.height/2,this.context.canvas.width,this.context.canvas.height),this.context.restore()}}])&&Q(e.prototype,i),n&&Q(e,n),t}();function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function U(t){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J(t,e){return(J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function K(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var tt=function(t){function e(){var t,i,n,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return n=this,a=(t=U(e)).call.apply(t,[this].concat(l)),i=!a||"object"!==V(a)&&"function"!=typeof a?Z(n):a,K(Z(i),"canvas",null),K(Z(i),"scatterCanvas",null),K(Z(i),"pathsCanvas",null),K(Z(i),"pathsymbolCanvas",null),K(Z(i),"maxLng",null),K(Z(i),"minLng",null),K(Z(i),"maxLat",null),K(Z(i),"minLat",null),K(Z(i),"centerPoint",null),K(Z(i),"ratio",null),K(Z(i),"areaList",[]),K(Z(i),"scatterList",[]),K(Z(i),"pathsList",[]),K(Z(i),"textList",[]),K(Z(i),"initBounds",function(){var t=i.props.areas;if(Array.isArray(t)&&t.length>0){i.maxLng=null,i.minLng=null,i.maxLat=null,i.minLat=null;for(var e=0;e<t.length;e+=1)Array.isArray(t[e].polygon)&&(t[e].polygon=t[e].polygon.map(function(t){var e=t,n=e[0],a=e[1];return null===i.maxLng?i.maxLng=n:i.maxLng=Math.max(i.maxLng,n),null===i.minLng?i.minLng=n:i.minLng=Math.min(i.minLng,n),null===i.maxLat?i.maxLat=a:i.maxLat=Math.max(i.maxLat,a),null===i.minLat?i.minLat=a:i.minLat=Math.min(i.minLat,a),e}))}}),K(Z(i),"mapRender",function(){i.areaList=[],i.scatterList.forEach(function(t){"function"==typeof t.stop&&t.stop()}),i.pathsList.forEach(function(t){"function"==typeof t.stop&&t.stop()}),i.textList.forEach(function(t){"function"==typeof t.clearText&&t.clearText()}),i.scatterList=[],i.pathsList=[],i.initBounds(),i.initCenter(),i.initAreas(),i.renderAreas(),i.initScatters(),i.initPaths(),i.initTexts()}),K(Z(i),"initCenter",function(){var t=i.props.areas,e=i.props.size;if(Array.isArray(t)&&null!==i.maxLng&&null!==i.maxLat&&null!==i.minLng&&null!==i.minLat){var n=i.canvas.canvas,a=s([i.minLng,i.minLat]),r=s([i.maxLng,i.maxLat]),o=[(r[0]+a[0])/2,(r[1]+a[1])/2],h=Math.min(n.width,n.height),c=Math["cover"===e?"min":"max"](r[1]-a[1],r[0]-a[0]),l=Math.sqrt(Math.pow(h,2)+Math.pow(h,2))/Math.sqrt(Math.pow(c,2)+Math.pow(c,2));i.ratio=l,i.centerPoint=o}}),K(Z(i),"initAreas",function(){var t=i.props.areas;if(Array.isArray(t)){var e=i.canvas.canvas.getContext("2d");e.translate(e.canvas.width/2,e.canvas.height/2);for(var n=0;n<t.length;n+=1){var a=t[n];if(Array.isArray(a.polygon)){var r=H(a.polygon);r=r.map(function(t){var e=s(t);return[(e[0]-i.centerPoint[0])*i.ratio,(i.centerPoint[1]-e[1])*i.ratio]}),i.areaList.push(new k(r,e,a.fillStyle,a.strokeStyle,a.name,a.shadowColor,a.mouseClick,a.mouseOver))}}}}),K(Z(i),"renderAreas",function(){i.areaList.forEach(function(t){t.drawMap()})}),K(Z(i),"initScatters",function(){var t=i.props.scatters;if(Array.isArray(t)){var e=i.scatterCanvas.canvas.getContext("2d");e.translate(e.canvas.width/2,e.canvas.height/2),t.forEach(function(t){var n=s(t.point),a=(n[0]-i.centerPoint[0])*i.ratio,r=(i.centerPoint[1]-n[1])*i.ratio;if(t.pointAtCanvas&&t.pointAtCanvas({x:(a+e.canvas.width/2)/o,y:(r+e.canvas.height/2)/o}),!t.hidden)if(t.path){var c=new N({path:t.path,context:e,center:i.centerPoint,point:t.point,ratio:i.ratio,color:t.color,mouseClick:t.mouseClick,mouseOver:t.mouseOver});c.render(),i.scatterList.push(c)}else if(t.img){var l=new X(e,a,r,t.img,t.mouseClick,t.mouseOver);l.render(),i.scatterList.push(l)}else{var u,f="number"==typeof t.size?t.size/h:10;"static"===t.mode?(u=new G(e,a,r,f,t.color,t.mouseClick,t.mouseOver)).fill():(u=new C(e,a,r,f,t.color,t.mouseClick,t.mouseOver)).start(),i.scatterList.push(u)}})}}),K(Z(i),"initPaths",function(){var t=i.props.paths;if(Array.isArray(t)){var e=i.pathsCanvas.canvas.getContext("2d");e.translate(e.canvas.width/2,e.canvas.height/2);var n=i.pathsymbolCanvas.canvas.getContext("2d");n.translate(n.canvas.width/2,n.canvas.height/2),t.forEach(function(t){var a=t.points;if(!Array.isArray(a)||a.length<2)console.error("there should be at least two sets of points in path");else{var r=a.map(function(t){var e=s(t);return[(e[0]-i.centerPoint[0])*i.ratio,(i.centerPoint[1]-e[1])*i.ratio]}),o=new D({points:r,symbol:t.symbol,width:t.width,animation:t.animation,color:t.color,speed:t.speed,delay:t.delay,context:e,scontext:n});"function"==typeof o[t.animation||"alternate"]&&o[t.animation||"alternate"](),i.pathsList.push(o)}})}}),K(Z(i),"initTexts",function(){var t=i.props.texts;if(Array.isArray(t)){var e=i.textCanvas.canvas.getContext("2d");e.translate(e.canvas.width/2,e.canvas.height/2),t.forEach(function(t){var n=s(t.point),a=(n[0]-i.centerPoint[0])*i.ratio,r=(i.centerPoint[1]-n[1])*i.ratio;if("string"==typeof t.text){var o=new W(t.text,e,a,r,t.color,t.size,t.align,t.vertical);o.fillText(),i.textList.push(o)}})}}),K(Z(i),"mapClick",function(t){for(var e=t.target.getBoundingClientRect(),n=t.clientX,a=t.clientY,r=(n-e.left)*o,s=(a-e.top)*o,h=i.areaList,c=0;c<h.length;c+=1){var l=h[c];l.createMapPath(),l.context.isPointInPath(r,s)&&"function"==typeof l.click&&l.click({x:r/o,y:s/o,screenX:n,screenY:a})}for(var u=i.scatterList,f=0;f<u.length;f+=1){var p=u[f];p.createPath(),p.context.isPointInPath(r,s)&&"function"==typeof p.click&&p.click({x:r/o,y:s/o,screenX:n,screenY:a})}}),K(Z(i),"overFun",function(t,e,n,a){for(var r=i.areaList,s=0;s<r.length;s+=1){var h=r[s];"object"===V(h.over)&&(h.createMapPath(),h.context.isPointInPath(t,e)?(h.clearMap(),h.drawMap(h.over.fillStyle),h.reover=1,i.runIn(h,{x:t/o,y:e/o,screenX:n,screenY:a})):1===h.reover&&(h.clearMap(),h.drawMap(),i.runOut(h),h.reover=0))}for(var c=i.scatterList,l=0;l<c.length;l+=1){var u=c[l];"object"===V(u.over)&&(u.createPath(),u.context.isPointInPath(t,e)?("symbol"===u.GENAME&&(u.clean(),u.render({color:u.over.color})),"scatter"===u.GENAME&&(u.stop(),u.start(u.over.color)),"circle"===u.GENAME&&(u.clear(),u.fill(u.over.color)),u.reover=1,i.runIn(u,{x:t/o,y:e/o,screenX:n,screenY:a})):1===u.reover&&("symbol"===u.GENAME&&(u.clean(),u.render()),"scatter"===u.GENAME&&(u.stop(),u.start()),"circle"===u.GENAME&&(u.clear(),u.fill()),u.reover=0,i.runOut(u)))}}),K(Z(i),"mapOver",function(){var t=r(i.overFun.bind(Z(i)));return function(e){var i=e.target.getBoundingClientRect(),n=e.clientX,a=e.clientY,r=(n-i.left)*o,s=(a-i.top)*o;t(r,s,n,a)}}),K(Z(i),"runIn",function(t,e){"function"==typeof t.over.moveIn&&t.over.moveIn(e)}),K(Z(i),"runOut",function(t){"function"==typeof t.over.moveOut&&t.over.moveOut()}),i}var i,n,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&J(t,e)}(e,a.a.Component),i=e,(n=[{key:"componentDidMount",value:function(){c(this.canvas.canvas&&this.scatterCanvas.canvas&&this.pathsCanvas.canvas&&this.pathsymbolCanvas.canvas&&this.textCanvas.canvas,this.mapRender.bind(this))}},{key:"componentWillReceiveProps",value:function(){var t=this;setTimeout(function(){t.canvas.initCanvas(),t.scatterCanvas.initCanvas(),t.pathsCanvas.initCanvas(),t.pathsymbolCanvas.initCanvas(),t.textCanvas.initCanvas(),t.mapRender()},0)}},{key:"componentWillUnmount",value:function(){this.areaList=[],this.scatterList.forEach(function(t){"function"==typeof t.stop&&t.stop()}),this.pathsList.forEach(function(t){"function"==typeof t.stop&&t.stop()}),this.scatterList=[],this.pathsList=[]}},{key:"render",value:function(){var t=this,e=this.props.zIndex,i=(e=void 0===e?{}:e).scatters,n=void 0===i?3:i,r=e.areas,s=void 0===r?1:r,o=e.paths,h=void 0===o?2:o;return a.a.createElement("div",{onMouseMove:this.mapOver(),onClick:this.mapClick,id:"ge-canvas",style:{position:"relative",width:"100%",height:"100%"}},a.a.createElement(w,{ref:function(e){return t.pathsCanvas=e},style:{position:"absolute",top:0,left:0,zIndex:h}}),a.a.createElement(w,{ref:function(e){return t.canvas=e},style:{position:"absolute",top:0,left:0,zIndex:s}}),a.a.createElement(w,{ref:function(e){return t.scatterCanvas=e},style:{position:"absolute",top:0,left:0,zIndex:n}}),a.a.createElement(w,{ref:function(e){return t.pathsymbolCanvas=e},style:{position:"absolute",top:0,left:0,zIndex:4}}),a.a.createElement(w,{ref:function(e){return t.textCanvas=e},style:{position:"absolute",top:0,left:0,zIndex:10}}))}}])&&$(i.prototype,n),l&&$(i,l),e}();e.default=tt}])});