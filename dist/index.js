!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.dva_react_hook=e(require("react")):t.dva_react_hook=e(t.react)}(this,function(t){return function(t){function e(e){for(var i,r,s=e[0],c=e[1],h=e[2],u=0,p=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);for(l&&l(e);p.length;)p.shift()();return a.push.apply(a,h||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(i=!1)}i&&(a.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},o={0:0},a=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=this.webpackJsonpdva_react_hook=this.webpackJsonpdva_react_hook||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var h=0;h<s.length;h++)e(s[h]);var l=c;return a.push([21,2,1]),n()}([function(e,n){e.exports=t},,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,a=void 0;try{for(var r,s=t[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!e||n.length!==e);i=!0);}catch(t){o=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=2*Math.PI,a=function(t,e,n,i,o,a,r){var s=t.x,c=t.y;return{x:i*(s*=e)-o*(c*=n)+a,y:o*s+i*c+r}},r=function(t,e){var n=1.5707963267948966===e?.551915024494:-1.5707963267948966===e?-.551915024494:4/3*Math.tan(e/4),i=Math.cos(t),o=Math.sin(t),a=Math.cos(t+e),r=Math.sin(t+e);return[{x:i-o*n,y:o+i*n},{x:a+r*n,y:r-a*n},{x:a,y:r}]},s=function(t,e,n,i){var o=t*n+e*i;return o>1&&(o=1),o<-1&&(o=-1),(t*i-e*n<0?-1:1)*Math.acos(o)};e.default=function(t){var e=t.px,n=t.py,c=t.cx,h=t.cy,l=t.rx,u=t.ry,p=t.xAxisRotation,f=void 0===p?0:p,y=t.largeArcFlag,v=void 0===y?0:y,m=t.sweepFlag,d=void 0===m?0:m,b=[];if(0===l||0===u)return[];var g=Math.sin(f*o/360),x=Math.cos(f*o/360),w=x*(e-c)/2+g*(n-h)/2,P=-g*(e-c)/2+x*(n-h)/2;if(0===w&&0===P)return[];l=Math.abs(l),u=Math.abs(u);var k=Math.pow(w,2)/Math.pow(l,2)+Math.pow(P,2)/Math.pow(u,2);k>1&&(l*=Math.sqrt(k),u*=Math.sqrt(k));var S=function(t,e,n,i,a,r,c,h,l,u,p,f){var y=Math.pow(a,2),v=Math.pow(r,2),m=Math.pow(p,2),d=Math.pow(f,2),b=y*v-y*d-v*m;b<0&&(b=0),b/=y*d+v*m;var g=(b=Math.sqrt(b)*(c===h?-1:1))*a/r*f,x=b*-r/a*p,w=u*g-l*x+(t+n)/2,P=l*g+u*x+(e+i)/2,k=(p-g)/a,S=(f-x)/r,A=(-p-g)/a,L=(-f-x)/r,O=s(1,0,k,S),M=s(k,S,A,L);return 0===h&&M>0&&(M-=o),1===h&&M<0&&(M+=o),[w,P,O,M]}(e,n,c,h,l,u,v,d,g,x,w,P),A=i(S,4),L=A[0],O=A[1],M=A[2],j=A[3],C=Math.abs(j)/(o/4);Math.abs(1-C)<1e-7&&(C=1);var I=Math.max(Math.ceil(C),1);j/=I;for(var E=0;E<I;E++)b.push(r(M,j)),M+=j;return b.map(function(t){var e=a(t[0],l,u,x,g,L,O),n=e.x,i=e.y,o=a(t[1],l,u,x,g,L,O),r=o.x,s=o.y,c=a(t[2],l,u,x,g,L,O);return{x1:n,y1:i,x2:r,y2:s,x:c.x,y:c.y}})}},,,function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},,,,function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";n.r(e);var i=n(0),o=n.n(i);function a(t){var e=t,n=[],i=20037508.34*e[0]/180;Math.abs(e[1])>85.05112877980659&&(e[1]=85.05112877980659*Math.abs(e[1])/e[1]);var o=Math.log(Math.tan((90+e[1])*Math.PI/360))/(Math.PI/180);return o=20037508.34*o/180,n[0]=i,n[1]=o,n}var r=window.devicePixelRatio&&2===window.devicePixelRatio?2:1;function s(t,e){t?e():setTimeout(function(){s(t,e)},0)}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(n,!0).forEach(function(e){v(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=function(t){function e(){var t,n,i,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return i=this,n=!(o=(t=p(e)).call.apply(t,[this].concat(r)))||"object"!==c(o)&&"function"!=typeof o?f(i):o,v(f(n),"canvas",null),n}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(e,o.a.Component),n=e,(i=[{key:"componentDidMount",value:function(){s(this.canvas,this.initCanvas.bind(this))}},{key:"initCanvas",value:function(){var t=window.getComputedStyle(this.canvas.parentNode),e=window.parseFloat(t.getPropertyValue("width")),n=window.parseFloat(t.getPropertyValue("height"));this.canvas.style.width="".concat(e,"px"),this.canvas.style.height="".concat(n,"px"),this.canvas.width=e*r,this.canvas.height=n*r}},{key:"render",value:function(){var t=this,e=this.props.style||{};return o.a.createElement("canvas",{ref:function(e){return t.canvas=e},style:l({},e)})}}])&&u(n.prototype,i),a&&u(n,a),e}();function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var b=function(){function t(e,n,i,o,a,r,s,c){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.points=e,this.context=n,this.fillStyle=i||"rgba(111,149,255,0.4)",this.strokeStyle=o||"rgba(111,149,255,0.4",this.name=a,this.shadowColor=r,this.click=s,this.over=c,this.reover=0}var e,n,i;return e=t,(n=[{key:"createMapPath",value:function(){var t=this;Array.isArray(this.points)&&(this.context.beginPath(),this.points.forEach(function(e,n){0===n?t.context.moveTo(e[0],e[1]):t.context.lineTo(e[0],e[1])}),this.context.closePath())}},{key:"drawMap",value:function(t,e){this.context.save(),this.createMapPath(),this.context.fillStyle=t||this.fillStyle,this.context.strokeStyle=e||this.strokeStyle,this.shadowColor&&(this.context.shadowColor=this.shadowColor,this.context.shadowBlur=10),this.context.fill(),this.context.stroke(),this.drawName(),this.context.restore()}},{key:"drawName",value:function(){if(Array.isArray(this.points)&&this.name&&this.name.text&&!1!==this.name.show){var t=null,e=null,n=null,i=null,o=(this.points.map(function(o){var a=o[0],r=o[1];return n=null===n?a:Math.max(n,a),t=null===t?a:Math.min(t,a),i=null===i?r:Math.max(i,r),e=null===e?r:Math.min(e,r),{x:a,y:r}}),{x:(n+t)/2,y:(i+e)/2});this.context.font="".concat(this.name.fontSize||"12px"," 微软雅黑"),this.context.textAlign="center",this.context.textBaseline="middle",this.context.fillStyle=this.name.color||"#fff",this.context.fillText(this.name.text,o.x,o.y)}}},{key:"cleardrawMap",value:function(){this.createMapPath(),this.context.save(),this.context.clip(),this.context.clearRect(-this.context.canvas.width/2,-this.context.canvas.height/2,this.context.canvas.width,this.context.canvas.height),this.context.restore(),this.drawMap()}}])&&d(e.prototype,n),i&&d(e,i),t}();function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w=function(){function t(e,n,i,o,a,r,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),x(this,"animate",function(t){this.tempRadius1>3*this.radius?this.tempRadius1=this.radius:this.tempRadius1+=.12,this.tempRadius2>3*this.radius?this.tempRadius2=this.radius:this.tempRadius2+=.12,this.tempRadius3>3*this.radius?this.tempRadius3=this.radius:this.tempRadius3+=.12,this.drawAnimate(t),this.animationID=window.requestAnimationFrame(this.animate.bind(this,t))}),x(this,"start",function(t){this.animationID=window.requestAnimationFrame(this.animate.bind(this,t))}),x(this,"stop",function(){this.animationID&&window.cancelAnimationFrame(this.animationID)}),this.x=n,this.y=i,this.radius=o,this.color=a||"yellow",this.context=e,this.tempRadius1=this.radius,this.tempRadius2=1.5*this.radius,this.tempRadius3=2.5*this.radius,this.animationID=null,this.click=r,this.over=s,this.reover=0}var e,n,i;return e=t,(n=[{key:"normalized",value:function(t,e,n,i,o){return(o-i)*(t-e)/(n-e)+i}},{key:"createPath",value:function(){this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI)}},{key:"strokePath",value:function(t){this.context.save(),this.context.strokeStyle=t||this.color,this.context.stroke(),this.context.restore()}},{key:"fillPath",value:function(t){this.context.save(),this.context.fillStyle=t||this.color,this.context.fill(),this.context.restore()}},{key:"strokeFlashCirclePath",value:function(t,e){this.context.save(),this.context.beginPath();var n=1-this.normalized(t,this.radius,2.7*this.radius,0,.8);this.context.globalAlpha=n<0?.05:n,this.context.arc(this.x,this.y,t,0,2*Math.PI),this.strokePath(e),this.context.restore()}},{key:"drawAnimate",value:function(t){this.context.save(),this.context.save(),this.context.beginPath(),this.context.arc(this.x,this.y,4*this.radius,0,2*Math.PI),this.context.clip(),this.context.clearRect(-this.context.canvas.width/2,-this.context.canvas.height/2,this.context.canvas.width,this.context.canvas.height),this.context.restore(),this.createPath(),this.fillPath(t),this.strokeFlashCirclePath(this.tempRadius1,t),this.strokeFlashCirclePath(this.tempRadius2,t),this.strokeFlashCirclePath(this.tempRadius3,t),this.context.restore()}}])&&g(e.prototype,n),i&&g(e,i),t}(),P=n(3),k=n.n(P),S=n(1),A=n.n(S);function L(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,o=!1,a=void 0;try{for(var r,s=t[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!e||n.length!==e);i=!0);}catch(t){o=!0,a=t}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function j(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var C=function(){function t(e){var n=e.path,i=e.context,o=e.center,a=e.point,r=e.ratio,s=e.color,c=e.mouseClick,h=e.mouseOver;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.svg=window.document.createElementNS("http://www.w3.org/2000/svg","path"),this.context=i,this.center=o,this.point=M(a),this.spoint=M(a),this.ratio=r,this.path="",this.rotate=0,this.scale=1,this.color=s||"yellow",this.draw="fill",this.realPath="",this.reover=0,"string"==typeof n&&(this.path=n),"object"===O(n)&&(n.hasOwnProperty("rotate")&&(this.rotate=n.rotate),n.hasOwnProperty("d")&&(this.path=n.d),n.hasOwnProperty("scale")&&(this.scale=n.scale),n.hasOwnProperty("color")&&(this.color=n.color),n.hasOwnProperty("draw")&&(this.draw=n.draw)),this.click=c,this.over=h}var e,n,i;return e=t,(n=[{key:"initPath",value:function(){var t=k()(this.path);this.realPath=t.rotate(this.rotate).scale(this.scale).rel().toString()}},{key:"convertPoint",value:function(t){var e=a(t||this.point);this.spoint=[(e[0]-this.center[0])*this.ratio,(this.center[1]-e[1])*this.ratio]}},{key:"reWritePath",value:function(){for(var t=0,e=0;e<this.realPath.length;e+=1){if("m"!==this.realPath[0].toLowerCase())throw new Error("path should begin with M");if(0!==e&&/^[A-Za-z]*$/.test(this.realPath[e])){t=e;break}}var n=this.realPath.slice(1,t),i=window.parseFloat(n.split(" ")[0]),o=window.parseFloat(n.split(" ")[1]),a=L(A()(this.realPath),4),r=a[0],s=a[1],c=(a[2]+r)/2-i,h=(s+a[3])/2-o,l=this.spoint[0]-c,u=this.spoint[1]-h;this.realPath=this.realPath.replace(n,"".concat(l," ").concat(u))}},{key:"createPath",value:function(t){this.svg.setAttributeNS(null,"d",t||this.realPath);var e=this.svg.getTotalLength(),n=e/100;this.context.beginPath();for(var i=0;i<=e;i+=n){var o=parseFloat(this.svg.getPointAtLength(i).x),a=parseFloat(this.svg.getPointAtLength(i).y);0===i&&this.context.moveTo(o,a),0!==i&&this.context.lineTo(o,a)}this.context.closePath()}},{key:"fillPath",value:function(t){this.context.fillStyle=t||this.color,this.context.fill()}},{key:"strokePath",value:function(t){this.context.strokeStyle=t||this.color,this.context.stroke()}},{key:"cleanPath",value:function(){this.context.clip(),this.context.clearRect(-this.context.canvas.width/2,-this.context.canvas.height/2,this.context.canvas.width,this.context.canvas.height)}},{key:"prepareAction",value:function(t){this.initPath(),Array.isArray(this.center)?(t&&this.convertPoint(t),!t&&this.convertPoint()):this.spoint=t||this.spoint,this.reWritePath(),this.createPath()}},{key:"fill",value:function(t){var e=t.color,n=t.point;this.prepareAction(n),this.fillPath(e)}},{key:"stroke",value:function(t){var e=t.color,n=t.point;this.prepareAction(n),this.strokePath(e)}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,n=t.point;"function"==typeof this[this.draw]&&this[this.draw]({color:e,point:n})}},{key:"clean",value:function(){this.context.save();var t=L(A()(this.realPath),4),e=t[0],n=t[1],i=t[2]-e,o=t[3]-n;this.context.beginPath(),this.context.rect(e,n,i,o),this.cleanPath(),this.context.restore()}}])&&j(e.prototype,n),i&&j(e,i),t}();function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var T=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.points=e.points,this.symbol=e.symbol,this.color=e.color||"yellow",this.width=e.width||8,this.animation=e.animation||"alternate",this.speed=Math.abs(e.speed),this.delay=e.delay||0,this.context=e.context,this.scontext=e.scontext,this.svg=window.document.createElementNS("http://www.w3.org/2000/svg","path"),this.path="",this.pathLength=0,this.spanLength=0,this.symPathLength=0,this.symSpanLength=0,this.step=0,this.symStep=0,this.animationID,this.clip,this.symbolInstance}var e,n,i;return e=t,(n=[{key:"getSpeed",value:function(t){return 1e3/Math.sqrt(t,2)+1}},{key:"initSvgPath",value:function(){var t=this;this.points.forEach(function(e,n){0===n&&(t.path="M".concat(e.join(" "))),0!==n&&(t.path="".concat(t.path,"L").concat(e.join(" ")))})}},{key:"initAnimate",value:function(){this.svg.setAttributeNS(null,"d",this.path),this.pathLength=this.svg.getTotalLength(),!this.speed===this.speed?this.spanLength=this.pathLength/100:this.spanLength=this.pathLength/this.getSpeed(this.speed)}},{key:"initSymbolAnimate",value:function(t){var e=Math.abs(t);this.svg.setAttributeNS(null,"d",this.path),this.symPathLength=this.svg.getTotalLength(),this.symSpanLength=!e===e?this.symPathLength/100:this.symPathLength/this.getSpeed(e)}},{key:"initStaticPath",value:function(){var t=this;this.context.beginPath(),this.points.forEach(function(e,n){var i,o;0===n&&(i=t.context).moveTo.apply(i,E(e)),0!==n&&(o=t.context).lineTo.apply(o,E(e))})}},{key:"stroke",value:function(){this.context.save(),this.context.strokeStyle=this.color,this.context.lineCap="round",this.context.lineJoin="round",this.context.lineWidth=this.width,this.context.stroke(),this.context.restore()}},{key:"alternate",value:function(){var t=this;this.initSvgPath(),new Promise(function(e){setTimeout(e,t.delay)}).then(function(){t.initAnimate(),t.animationID=window.requestAnimationFrame(t.alternateA.bind(t))}),this.runSymbol()}},{key:"alternateA",value:function(){this.step>=this.pathLength&&(this.step=0,this.clip=!this.clip),this.step+=this.spanLength;var t=this.step,e=parseFloat(this.svg.getPointAtLength(t).x),n=parseFloat(this.svg.getPointAtLength(t).y);t-=this.spanLength;var i=parseFloat(this.svg.getPointAtLength(t).x),o=parseFloat(this.svg.getPointAtLength(t).y);this.clip?(this.context.beginPath(),this.context.save(),this.context.arc(e,n,this.spanLength,0,2*Math.PI),this.context.clip(),this.context.clearRect(-this.context.canvas.width/2,-this.context.canvas.height/2,this.context.canvas.width,this.context.canvas.height),this.context.restore()):(this.context.beginPath(),this.context.moveTo(i,o),this.context.lineTo(e,n),this.context.save(),this.context.strokeStyle=this.color,this.context.lineWidth=this.width,this.context.stroke(),this.context.restore()),this.animationPathID=window.requestAnimationFrame(this.alternateA.bind(this))}},{key:"symbolA",value:function(){this.symStep>=this.symPathLength&&(this.symStep=0),this.symStep+=this.symSpanLength;var t=this.symStep,e=parseFloat(this.svg.getPointAtLength(t).x),n=parseFloat(this.svg.getPointAtLength(t).y);this.symbolInstance&&(this.symbolInstance.clean(),this.symbolInstance.render({point:[e,n]})),this.symbolAID=window.requestAnimationFrame(this.symbolA.bind(this))}},{key:"normal",value:function(){this.initStaticPath(),this.stroke(),this.initSvgPath(),this.runSymbol()}},{key:"runSymbol",value:function(){var t=this;this.symbol&&"object"===I(this.symbol)&&"string"==typeof this.symbol.d&&("number"==typeof this.symbol.delay?new Promise(function(e){setTimeout(e,t.symbol.delay)}).then(function(){t.symbolStart()}):this.symbolStart())}},{key:"symbolStart",value:function(){this.symbolInstance=new C({path:this.symbol,context:this.scontext,point:this.points[0],color:this.color}),this.symbolInstance.render(),this.initSymbolAnimate(this.symbol.speed),this.symbolAID=window.requestAnimationFrame(this.symbolA.bind(this))}},{key:"stop",value:function(){this.animationPathID&&window.cancelAnimationFrame(this.animationPathID),this.symbolAID&&window.cancelAnimationFrame(this.symbolAID)}}])&&_(e.prototype,n),i&&_(e,i),t}();function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function D(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N(t,e){return(N=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function B(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var X=function(t){function e(){var t,n,i,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var s=arguments.length,c=new Array(s),h=0;h<s;h++)c[h]=arguments[h];return i=this,o=(t=q(e)).call.apply(t,[this].concat(c)),n=!o||"object"!==R(o)&&"function"!=typeof o?z(i):o,B(z(n),"canvas",null),B(z(n),"scatterCanvas",null),B(z(n),"pathsCanvas",null),B(z(n),"pathsymbolCanvas",null),B(z(n),"maxLng",null),B(z(n),"minLng",null),B(z(n),"maxLat",null),B(z(n),"minLat",null),B(z(n),"centerPoint",null),B(z(n),"ratio",null),B(z(n),"areaList",[]),B(z(n),"scatterList",[]),B(z(n),"pathsList",[]),B(z(n),"initBounds",function(){var t=n.props.areas;if(Array.isArray(t)&&t.length>0){n.maxLng=null,n.minLng=null,n.maxLat=null,n.minLat=null;for(var e=0;e<t.length;e+=1)Array.isArray(t[e].polygon)&&(t[e].polygon=t[e].polygon.map(function(t){var e=t,i=e[0],o=e[1];return null===n.maxLng?n.maxLng=i:n.maxLng=Math.max(n.maxLng,i),null===n.minLng?n.minLng=i:n.minLng=Math.min(n.minLng,i),null===n.maxLat?n.maxLat=o:n.maxLat=Math.max(n.maxLat,o),null===n.minLat?n.minLat=o:n.minLat=Math.min(n.minLat,o),e}))}}),B(z(n),"mapRender",function(){n.areaList=[],n.scatterList.forEach(function(t){"function"==typeof t.stop&&t.stop()}),n.pathsList.forEach(function(t){"function"==typeof t.stop&&t.stop()}),n.scatterList=[],n.pathsList=[],n.initBounds(),n.initCenter(),n.initAreas(),n.renderAreas(),n.initScatters(),n.initPaths()}),B(z(n),"initCenter",function(){var t=n.props.areas;if(Array.isArray(t)&&null!==n.maxLng&&null!==n.maxLat&&null!==n.minLng&&null!==n.minLat){var e=n.canvas.canvas,i=a([n.minLng,n.minLat]),o=a([n.maxLng,n.maxLat]),r=[(o[0]+i[0])/2,(o[1]+i[1])/2],s=Math.min(e.width,e.height),c=Math.max(o[1]-i[1],o[0]-i[0]),h=Math.sqrt(Math.pow(s,2)+Math.pow(s,2))/Math.sqrt(Math.pow(c,2)+Math.pow(c,2));n.ratio=h,n.centerPoint=r}}),B(z(n),"initAreas",function(){var t=n.props.areas,e=n.canvas.canvas.getContext("2d");e.translate(e.canvas.width/2,e.canvas.height/2);for(var i=0;i<t.length;i+=1){var o=t[i];if(Array.isArray(o.polygon)){var r=F(o.polygon);r=r.map(function(t){var e=a(t);return[(e[0]-n.centerPoint[0])*n.ratio,(n.centerPoint[1]-e[1])*n.ratio]}),n.areaList.push(new b(r,e,o.fillStyle,o.strokeStyle,o.name,o.shadowColor,o.mouseClick,o.mouseOver))}}}),B(z(n),"renderAreas",function(){n.areaList.forEach(function(t){t.drawMap()})}),B(z(n),"initScatters",function(){var t=n.props.scatters;if(Array.isArray(t)){var e=n.scatterCanvas.canvas.getContext("2d");e.translate(e.canvas.width/2,e.canvas.height/2),t.forEach(function(t){var i=a(t.point),o=(i[0]-n.centerPoint[0])*n.ratio,s=(n.centerPoint[1]-i[1])*n.ratio;if(t.pointAtCanvas&&t.pointAtCanvas({x:(o+e.canvas.width/2)/r,y:(s+e.canvas.height/2)/r}),!t.hidden)if(t.path){var c=new C({path:t.path,context:e,center:n.centerPoint,point:t.point,ratio:n.ratio,color:t.color,mouseClick:t.mouseClick,mouseOver:t.mouseOver});c.render(),n.scatterList.push(c)}else{var h="number"==typeof t.size?t.size:10,l=new w(e,o,s,h,t.color,t.mouseClick,t.mouseOver);l.start(),n.scatterList.push(l)}})}}),B(z(n),"initPaths",function(){var t=n.props.paths;if(Array.isArray(t)){var e=n.pathsCanvas.canvas.getContext("2d");e.translate(e.canvas.width/2,e.canvas.height/2);var i=n.pathsymbolCanvas.canvas.getContext("2d");i.translate(i.canvas.width/2,i.canvas.height/2),t.forEach(function(t){var o=t.points;if(!Array.isArray(o)||o.length<2)console.error("there should be at least two sets of points in path");else{var r=o.map(function(t){var e=a(t);return[(e[0]-n.centerPoint[0])*n.ratio,(n.centerPoint[1]-e[1])*n.ratio]}),s=new T({points:r,symbol:t.symbol,width:t.width,animation:t.animation,color:t.color,speed:t.speed,delay:t.delay,context:e,scontext:i});"function"==typeof s[t.animation||"alternate"]&&s[t.animation||"alternate"](),n.pathsList.push(s)}})}}),B(z(n),"mapClick",function(t){for(var e=t.target.getBoundingClientRect(),i=t.clientX,o=t.clientY,a=(i-e.left)*r,s=(o-e.top)*r,c=n.areaList,h=0;h<c.length;h+=1){var l=c[h];l.createMapPath(),l.context.isPointInPath(a,s)&&"function"==typeof l.click&&l.click({x:a/r,y:s/r,screenX:i,screenY:o})}for(var u=n.scatterList,p=0;p<u.length;p+=1){var f=u[p];f.createPath(),f.context.isPointInPath(a,s)&&"function"==typeof f.click&&f.click({x:a/r,y:s/r,screenX:i,screenY:o})}}),B(z(n),"mapOver",function(){var t=+new Date;return function(e){if(+new Date-t>120){for(var i=e.target.getBoundingClientRect(),o=e.clientX,a=e.clientY,s=(o-i.left)*r,c=(a-i.top)*r,h=n.areaList,l=0;l<h.length;l+=1){var u=h[l];"object"===R(u.over)&&(u.createMapPath(),u.context.isPointInPath(s,c)?(u.cleardrawMap(),u.drawMap(u.over.fillStyle,u.over.strokeStyle),u.reover=1,n.runIn(u,{x:s/r,y:c/r,screenX:o,screenY:a})):1===u.reover&&(u.cleardrawMap(),u.drawMap(),n.runOut(u),u.reover=0))}for(var p=n.scatterList,f=0;f<p.length;f+=1){var y=p[f];"object"===R(y.over)&&(y.createPath(),y.context.isPointInPath(s,c)?("CSymbol"===y.constructor.name&&(y.clean(),y.render({color:y.over.color})),"Scatter"===y.constructor.name&&(y.stop(),y.start(y.over.color)),y.reover=1,n.runIn(y,{x:s/r,y:c/r,screenX:o,screenY:a})):1===y.reover&&("CSymbol"===y.constructor.name&&(y.clean(),y.render()),"Scatter"===y.constructor.name&&(y.stop(),y.start()),y.reover=0,n.runOut(y)))}t=+new Date}}}),B(z(n),"runIn",function(t,e){"function"==typeof t.over.moveIn&&t.over.moveIn(e)}),B(z(n),"runOut",function(t){"function"==typeof t.over.moveOut&&t.over.moveOut()}),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&N(t,e)}(e,o.a.Component),n=e,(i=[{key:"componentDidMount",value:function(){s(this.canvas.canvas&&this.scatterCanvas.canvas&&this.pathsCanvas.canvas&&this.pathsymbolCanvas.canvas,this.mapRender.bind(this))}},{key:"componentWillReceiveProps",value:function(){var t=this;setTimeout(function(){t.canvas.initCanvas(),t.scatterCanvas.initCanvas(),t.pathsCanvas.initCanvas(),t.mapRender()},0)}},{key:"render",value:function(){var t=this;return o.a.createElement("div",{onMouseMove:this.mapOver(),onClick:this.mapClick,id:"ge-canvas",style:{position:"relative",width:"100%",height:"100%"}},o.a.createElement(m,{ref:function(e){return t.pathsCanvas=e},style:{position:"absolute",top:0,left:0,zIndex:1}}),o.a.createElement(m,{ref:function(e){return t.canvas=e},style:{position:"absolute",top:0,left:0,zIndex:2}}),o.a.createElement(m,{ref:function(e){return t.scatterCanvas=e},style:{position:"absolute",top:0,left:0,zIndex:3}}),o.a.createElement(m,{ref:function(e){return t.pathsymbolCanvas=e},style:{position:"absolute",top:0,left:0,zIndex:1}}))}}])&&D(n.prototype,i),c&&D(n,c),e}();e.default=X}])});